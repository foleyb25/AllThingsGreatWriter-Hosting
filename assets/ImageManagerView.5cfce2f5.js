import{f as _,m as h,h as v,D as S}from"./DropFile.733ca3ed.js";import{_ as A,s as C,u as I,e as w,I as y,g as d,o as l,c,a as i,h as u,k as p,t as k,G as m,r as f}from"./index.275647b8.js";import{a as j}from"./aspect_missing_img.27806897.js";const{writer:F}=C(I()),{pinia_uploadArticleImage:D}=w(),B=y({components:{Cropper:_,CircleStencil:h,Preview:v,DropFile:S},setup(){const e=m(),a=m();var s=f({articleSrc:j,article:"",profile:"",success:!1,failure:!1,failure_Message:""}),o=f({result:{coordinates:null,image:null}});return{uploadArticleImage:async()=>{if(s.articleSrc!=""&&e.value){const{canvas:r}=e.value.getResult();r.toBlob(async t=>{await D(t,s.articleSrc,F.value._id)},"image/jpeg")}},setArticleImage:r=>{s.articleSrc=r.path,s.article=r.name},onChangeArticle:({coordinates:r,image:t})=>{o.result={coordinates:r,image:t}},state:o,cropper:e,circleCropper:a,img:s}}}),V={class:"w-full"},$={class:"flex flex-col justify-center items-center"},M={id:"cropper-container",class:"flex justify-center items-center w-[45%] h-[500px] mr-2"},N={key:0,class:"flex justify-center items-center w-full bg-green-300 mt-4 border border-black border-solid rounded"},R={key:1,class:"flex justify-center items-center w-full bg-red-300 mt-4 border border-black border-solid rounded"};function x(e,a,s,o,g,b){const n=d("cropper"),r=d("DropFile");return l(),c("div",V,[i("div",$,[i("div",M,[u(n,{ref:"cropper",src:e.img.articleSrc,onChange:e.onChangeArticle,"stencil-props":{handlers:{},moveable:!1,scaleable:!1,aspectRatio:3/2},"resize-image":{adjustStencil:!1},"image-restriction":"stencil",class:"h-full w-full"},null,8,["src","onChange"])]),u(r,{onFileSelected:e.setArticleImage,class:"mt-8"},null,8,["onFileSelected"]),e.img.success?(l(),c("div",N," Successfully uploaded image ")):p("",!0),e.img.failure?(l(),c("div",R," Failed: "+k(e.img.failure_Message),1)):p("",!0),i("button",{class:"w-24 h-12 bg-blue-300 border-solid border-black border rounded mt-4",onClick:a[0]||(a[0]=(...t)=>e.uploadArticleImage&&e.uploadArticleImage(...t))}," Upload ")])])}const P=A(B,[["render",x]]);export{P as default};
