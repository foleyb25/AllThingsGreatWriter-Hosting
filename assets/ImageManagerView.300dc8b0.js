import{f as I,m as y,h as _,D as w,p as k}from"./missing_img.4eaf8cf2.js";import{_ as A,s as P,u as j,e as F,I as B,g as m,o as t,c as i,a,h as d,l as u,t as g,G as b,r as h}from"./index.321bfbf4.js";import{a as D}from"./aspect_missing_img.27806897.js";const{writer:S}=P(j()),{pinia_uploadArticleImage:R,pinia_uploadProfileImage:$}=F(),M=B({components:{Cropper:I,CircleStencil:y,Preview:_,DropFile:w},setup(){const e=b(),o=b();var l=h({articleSrc:D,profileSrc:k,article:"",profile:"",success:!1,failure:!1,failure_Message:""}),c=h({result:{coordinates:null,image:null}});return{uploadArticleImage:async()=>{if(l.articleSrc!=""&&e.value){const{canvas:r}=e.value.getResult();r.toBlob(async s=>{await R(s,l.articleSrc,S.value._id)},"image/jpeg")}},uploadProfileImage:async()=>{if(l.profileSrc!=""&&o.value){const{canvas:r}=o.value.getResult();await r.toBlob(async s=>{await $(s,l.profileSrc,S.value._id)},"image/jpeg")}},setProfileImage:r=>{l.profileSrc=r.path,l.profile=r.name},setArticleImage:r=>{l.articleSrc=r.path,l.article=r.name},onChangeProfile:({coordinates:r,image:s})=>{c.result={coordinates:r,image:s}},onChangeArticle:({coordinates:r,image:s})=>{c.result={coordinates:r,image:s}},state:c,cropper:e,circleCropper:o,img:l}}}),V={class:"w-full"},N={class:"flex flex-col justify-center items-center"},z={id:"cropper-container",class:"flex justify-center items-center w-[45%] h-[500px] mr-2"},U={key:0,class:"flex justify-center items-center w-full bg-green-300 mt-4 border border-black border-solid rounded"},q={key:1,class:"flex justify-center items-center w-full bg-red-300 mt-4 border border-black border-solid rounded"},E=a("div",{class:"mt-6"},null,-1),G={id:"profile-cropper-container",class:"flex justify-center items-center aspect-square h-[500px] mr-2"},T={key:2,class:"flex justify-center items-center w-full bg-green-300 mt-4 border border-black border-solid rounded"},W={key:3,class:"flex justify-center items-center w-full bg-red-300 mt-4 border border-black border-solid rounded"};function H(e,o,l,c,v,C){const p=m("cropper"),f=m("DropFile");return t(),i("div",V,[a("div",N,[a("div",z,[d(p,{ref:"cropper",src:e.img.articleSrc,onChange:e.onChangeArticle,"stencil-props":{handlers:{},moveable:!1,scaleable:!1,aspectRatio:3/2},"resize-image":{adjustStencil:!1},"image-restriction":"stencil",class:"h-full w-full"},null,8,["src","onChange"])]),d(f,{onFileSelected:e.setArticleImage,class:"mt-8"},null,8,["onFileSelected"]),e.img.success?(t(),i("div",U," Successfully uploaded image ")):u("",!0),e.img.failure?(t(),i("div",q," Failed: "+g(e.img.failure_Message),1)):u("",!0),a("button",{class:"w-24 h-12 bg-blue-300 border-solid border-black border rounded mt-4",onClick:o[0]||(o[0]=(...n)=>e.uploadArticleImage&&e.uploadArticleImage(...n))}," Upload "),E,a("div",G,[d(p,{ref:"circleCropper",src:e.img.profileSrc,onChange:e.onChangeProfile,"stencil-component":e.$options.components.CircleStencil,"stencil-props":{aspectRatio:1/1},"resize-image":{adjustStencil:!1},class:"h-full w-full"},null,8,["src","onChange","stencil-component"])]),d(f,{onFileSelected:e.setProfileImage,class:"mt-8"},null,8,["onFileSelected"]),e.img.success?(t(),i("div",T," Successfully uploaded image ")):u("",!0),e.img.failure?(t(),i("div",W," Failed: "+g(e.img.failure_Message),1)):u("",!0),a("button",{class:"w-24 h-12 bg-blue-300 border-solid border-black border rounded mt-4",onClick:o[1]||(o[1]=(...n)=>e.uploadProfileImage&&e.uploadProfileImage(...n))}," Upload ")])])}const Q=A(M,[["render",H]]);export{Q as default};
